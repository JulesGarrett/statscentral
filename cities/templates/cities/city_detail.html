{% extends 'base.html' %}


{% block content %}

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<!-- <style type="text/css">
	.card{
		max-width: 700px;
	}
	.card-body{
		padding: 20px;
	}
</style> -->
<br>
<div class="container">
	<div class="row">

		<!-- Blog Post -->
		<div class="card m-auto" style="width: 100%">
			<div class="card-body">
        <h2 class="card-title" style="color: #17a2b8">{{city.City}}, {{city.State}}</h2>
				<div class="row">
					<div class="col">
		        <h5> OVERVIEW </h5>
		        <P> Population: {{cityid_pop.Pop}} <br>
								Average Rating: {Average Rating} <br>
						</P>
					</div>
					<div class="col">
						<iframe src="https://maps.google.com/maps?q='+{{city.City}}, {{city.State}}+'&hl=en&z=14&amp;output=embed" width="100%" height="400" frameborder="0" style="border:0" allowfullscreen></iframe>
					</div>
				</div>


			 <div class="row">
					<div class="col-md-auto">
		        <h5> TAX DATA </h5>
							<P> <canvas id="tax_pie"  width="50%" height="400"></canvas>
								<script>
									var ctx = document.getElementById('tax_pie').getContext('2d');
									var myChart = new Chart(ctx, {
									    type: 'pie',
											options: {
													title: {
															display: true,
															text: 'Top 10 Tax Types for {{city.State}}'
													}
											},
									    data: {
													labels: [{% for item in st_tax %} "{{item.tax}}", {% endfor %}],
									        datasets: [{
									            label: 'Tax Amount in Dollars',
									            data: [{% for item in st_tax %} "{{item.amount}}", {% endfor %}],
															backgroundColor: ["#17a2b8", "#e85d47", "#008080", "#20c8e3", "#5f9ea0", "#17a2b8", "#e85d47", "#008080", "#20c8e3", "#5f9ea0"],
									        }]
									    }
									});
								</script>
							</P>
						</div>
					<div class="col-md-auto">
						<br>
						<P> <canvas id="avg_state_tax" width="50%" height="400"></canvas>
							<script>
								var ctx = document.getElementById('avg_state_tax').getContext('2d');
								var myChart = new Chart(ctx, {
										type: 'bar',
										options: {
												title: {
														display: true,
														text: 'Top 10 Tax Types for {{city.State}}'
												}
										},
										data: {
												labels: [{% for item in st_tax_avg %} "{{item.tax}}", {% endfor %}],
												datasets: [{
														label: '{{city.State}}',
														data: [{% for item in st_tax_avg %} "{{item.amount}}", {% endfor %}],
														backgroundColor: "#17a2b8"
												},
												{
														label: 'State Average',
														data: [{% for item in st_tax_avg %} "{{item.avg_amount}}", {% endfor %}],
														backgroundColor: "#e85d47"
												}]
										}
								});
							</script>
						</P>
					</div>
				</div>

				<div class="row">
					<div class="col">
		        <h5> SCHOOL DATA </h5>
		        <p> will put school data and graph here </p>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<h5> MILITARY DATA </h5>
						<p> <canvas id="MilChart" width="400" height="400"></canvas>
							<script>
								var ctx = document.getElementById('MilChart').getContext('2d');
								var myChart = new Chart(ctx, {
								    type: 'bar',
								    data: {
												labels: ["US Average", "{{city.City}}"],
								        datasets: [{
								            label: 'Population',
								            data: [50000, {{cityid_pop.Pop}}],
								            backgroundColor: [
								                'rgba(255, 99, 132, 0.2)',
								                'rgba(54, 162, 235, 0.2)',
								                'rgba(255, 206, 86, 0.2)',
								                'rgba(75, 192, 192, 0.2)',
								                'rgba(153, 102, 255, 0.2)',
								                'rgba(255, 159, 64, 0.2)'
								            ],
								            borderColor: [
								                'rgba(255, 99, 132, 1)',
								                'rgba(54, 162, 235, 1)',
								                'rgba(255, 206, 86, 1)',
								                'rgba(75, 192, 192, 1)',
								                'rgba(153, 102, 255, 1)',
								                'rgba(255, 159, 64, 1)'
								            ],
								            borderWidth: 1
								        }]
								    },
								    options: {
								        scales: {
								            yAxes: [{
								                ticks: {
								                    beginAtZero: true
								                }
								            }]
								        }
								    }
								});
							</script>
						</p>
					</div>
				</div>
				<div class="row">
					<div class="col">
		        <h5> REVIEWS </h5>
		        <p> will put list of reviews here </p>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>
<br>
<br>



{% endblock content %}
