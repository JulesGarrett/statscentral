{% extends 'base.html' %}
{% block content %}


<style type="text/css">
	.my-custom-scrollbar{
		position: relative;
		height: 400px;
		overflow: auto;
		display:block;
		}

</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<!-- <style type="text/css">
	.card{
		max-width: 700px;
	}
	.card-body{
		padding: 20px;
	}
</style> -->
<br>
<div class="container">
	<div class="row">


		<div class="card m-auto" style="width: 100%">
			<div class="card-body">
        <h2 class="card-title" style="color: #17a2b8">{{city.City}}, {{city.State}}</h2>


				<!-- OVERVIEW SECTION -->
				<div class="row">
					<div class="col">
		        <h5> OVERVIEW </h5>
		        <P> Population: {{cityid_pop.Pop}} <br>
								Average Rating for {{city_rating.City}}: {{city_rating.avg_rating}} <br>
								Average Rating for Cities in {{state_rating.State}}: {{city_rating.avg_rating}}
						</P>
					</div>
					<div class="col">
						<iframe src="https://maps.google.com/maps?q='+{{city.City}}, {{city.State}}+'&hl=en&z=14&amp;output=embed" width="100%" height="400" frameborder="0" style="border:0" allowfullscreen></iframe>
					</div>
				</div>


				<!-- TAX DATA SECTION -->
			 <div class="row">
					<div class="col-md-auto">
		        <h5> TAX DATA </h5>
							<P> <canvas id="tax_pie"  width="500" height="400"></canvas>
								<script>
									var ctx = document.getElementById('tax_pie').getContext('2d');
									var myChart = new Chart(ctx, {
									    type: 'pie',
											options: {
													title: {
															display: true,
															text: 'Top 7 Tax Types for {{city.State}} (in Millions of Dollars)'
													}
											},
									    data: {
													labels: [{% for item in st_tax %} "{{item.tax}}", {% endfor %}],
									        datasets: [{
									            label: 'Tax Amount in Dollars',
									            data: [{% for item in st_tax %} "{{item.amount}}", {% endfor %}],
															backgroundColor: ["#17a2b8", "#e85d47", "#008080", "#20c8e3", "#5f9ea0", "#17a2b8", "#e85d47", "#008080", "#20c8e3", "#5f9ea0"],
									        }]
									    }
									});
								</script>
							</P>
						</div>
					<div class="col-md-auto">
						<br>
						<P> <canvas id="avg_state_tax" width="500" height="400"></canvas>
							<script>
								var ctx = document.getElementById('avg_state_tax').getContext('2d');
								var myChart = new Chart(ctx, {
										type: 'bar',
										options: {
												title: {
														display: true,
														text: 'Tax Amount by Category {{city.State}} vs Average'
												}
										},
										data: {
												labels: [{% for item in st_tax_avg %} "{{item.tax}}", {% endfor %}],
												datasets: [{
														label: '{{city.State}}',
														data: [{% for item in st_tax_avg %} "{{item.amount}}", {% endfor %}],
														backgroundColor: "#17a2b8"
												},
												{
														label: 'Average',
														data: [{% for item in st_tax_avg %} "{{item.avg_amount}}", {% endfor %}],
														backgroundColor: "#e85d47"
												}]
										}
								});
							</script>
						</P>
					</div>
				</div>


				<!-- SCHOOL DATA SECTION -->
				<div class="row">
					<div class="col-md-auto">
		        <h5> MILITARY DATA </h5>
						<div class="table-wrapper-scroll-y my-custom-scrollbar">
			        <table class="table table-sm table-fixed">
								<h7> Military Bases in {{state_rating.State}}
								<thead>
									<tr class="table-info">
										<th>Site Name</th>
										<th>Component</th>
										<th>Status</th>
									</tr>
								</thead>
								<tbody>
									{% for row in militarybases %}
									<tr>
										<td>{{row.SiteName}}</td>
										<td>{{row.Component}}</td>
										<td>{{row.Status}}</td>
									</tr>
									{% endfor %}
								</tbody>


			        </table>
						</div>
					</div>
					<div class="col-md-auto">
						<br>
						<h5>                    </h5>
						<div class="table-wrapper-scroll-y my-custom-scrollbar">
							<table class="table table-sm">
								<h7> Military Care Facilities in {{state_rating.State}}
								<thead>
									<tr class="table-info">
										<th>Facility Name</th>
										<th>City</th>
										<th>Primary Service</th>
										<th>Type</th>
									</tr>
								</thead>
								<tbody>
									{% for row in militarycare %}
									<tr>
										<td> <a href="http://maps.google.com/?q={{row.S_ADD2}}+{{row.S_CITY}}+{{row.S_STATE}}" >{{row.FacilityName}}<a></td>
										<td> {{row.S_CITY}}</td>
										<td>{{row.PRIM_SVC}}</td>
										<td>{{row.Type}}</td>
									</tr>
									{% endfor %}
								</tbody>


							</table>
						</div>
					</div>
				</div>


				<!-- MILITARY DATA SECTION -->
				<div class="row">
					<div class="col">
						<h5> SCHOOL DATA </h5>
					</div>
				</div>


				<!-- REVIEWS SECTION -->
				<div class="row">
					<div class="col">
		        <h5> REVIEWS </h5>
						{% for rev in reviews %}
							<p>
							 	{{rev.Rating}} {{rev.Comments}}
							</p>
					 	{% endfor %}
					</div>
				</div>

			</div>
		</div>
	</div>
</div>
<br>
<br>



{% endblock content %}
